<div class="grid">
  <div class="col-12">
    <button pButton type="button" icon="pi pi-arrow-left" label="Go back" pTooltip="Conversion jobs"
            class="p-button-link" [routerLink]="['/teacher']">
    </button>
  </div>
</div>

<div class="p-card m-5 p-5 p-fluid">
  <h1>
    Create new test!
  </h1>

  <form [formGroup]="createTestFormGroup">
    <div class="grid">
      <div class="col-12">
        <p-fieldset legend="Test name and assigned students" [toggleable]="true">
          <div class="grid p-fluid">
            <div class="col-6">
              <div class="p-inputgroup">
              <span class="p-float-label">
                <input pInputText id="testName" name="testName" formControlName="testName" />
                <label for="testName">Test name</label>
              </span>
              </div>
            </div>
            <div class="col-6">
              <span class="p-float-label">
                <p-multiSelect [options]="studentNames" display="chip" id="assignedStudents" name="assignedStudents"
                               formControlName="assignedStudentNames"></p-multiSelect>
                <label for="assignedStudents">Assigned students</label>
              </span>
            </div>
          </div>
        </p-fieldset>
      </div>
      <div class="col-12">
        <p-fieldset legend="Questions" [toggleable]="true">
          <div class="grid p-fluid">
            <div class="col-4">
              <div class="grid p-fluid">
                <div class="col-12">
                  <button pButton type="button" class="p-button-outlined p-button-info" label="Add checkbox question"
                          (click)="addCheckboxQuestion()"></button>
                </div>
                <div *ngFor="let question of formGroupService.getFormArray(createTestFormGroup, 'checkboxQuestions').controls, let i = index"
                     class="col-12">
                  <app-create-question [questionType]="checkBoxQuestionType" [questionControl]="question"></app-create-question>
                  <div class="col-12">
                    <button pButton type="button" class="p-button-outlined p-button-danger" label="Delete question"
                            (click)="deleteQuestion('checkboxQuestions', i)"></button>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-4">
              <div class="grid p-fluid">
                <div class="col-12">
                  <button pButton type="button" class="p-button-outlined p-button-info" label="Add radiobutton question"
                          (click)="addRadiobuttonQuestion()"></button>
                </div>
                <div *ngFor="let question of formGroupService.getFormArray(createTestFormGroup, 'radiobuttonQuestions').controls, let i = index"
                     class="col-12">
                  <app-create-question [questionType]="radioButtonQuestionType" [questionControl]="question"></app-create-question>
                  <div class="col-12">
                    <button pButton type="button" class="p-button-outlined p-button-danger" label="Delete question"
                            (click)="deleteQuestion('radiobuttonQuestions', i)"></button>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-4">
              <div class="grid p-fluid">
                <div class="col-12">
                  <button pButton type="button" class="p-button-outlined p-button-info" label="Add string question"
                          (click)="addStringQuestion()"></button>
                </div>
                <div *ngFor="let question of formGroupService.getFormArray(createTestFormGroup, 'stringQuestions').controls, let i = index"
                     class="col-12">
                  <app-create-question [questionType]="stringQuestionType" [questionControl]="question"></app-create-question>
                  <div class="col-12">
                    <button pButton type="button" class="p-button-outlined p-button-danger" label="Delete question"
                            (click)="deleteQuestion('stringQuestions', i)"></button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </p-fieldset>
      </div>
    </div>
    <div class="col-12">
      <span class="text-danger">{{errorMessage}}</span>
    </div>
    <div class="col-12">
      <button pButton type="submit" class="p-button-outlined p-button-success p-button-lg" label="Create test"
              icon="pi pi-check" (click)="submitTest()"></button>
    </div>
  </form>
</div>
